questions:
- question: Create a manifest for a Pod that uses the service account 'app-sa'.
  solutions:
  - "apiVersion: v1\nkind: Pod\nmetadata:\n  name: sa-pod\nspec:\n  containers:\n\
    \    - command:\n        - sleep\n        - '3600'\n      image: busybox\n   \
    \   name: main\n  serviceAccountName: app-sa\n"
- question: Command to generate a ServiceAccount app-sa (output YAML) without creating
    the resource.
  solutions:
  - kubectl create serviceaccount app-sa --dry-run=client -o yaml
- question: Pod manifest using serviceAccountName app-sa and not auto-mounting token.
  solutions:
  - "apiVersion: v1\nkind: Pod\nmetadata:\n  name: sa-pod\nspec:\n  automountServiceAccountToken:\
    \ false\n  containers:\n    - command:\n        - sh\n        - -c\n        -\
    \ sleep 3600\n      image: busybox\n      name: app\n  serviceAccountName: app-sa\n"
- question: Create a ServiceAccount named default-sa.
  source: https://kubernetes.io/docs/reference/kubectl/#:~:text=,v1%20true%20Service
  solutions:
  - kubectl create serviceaccount default-sa
- question: List all ServiceAccounts.
  source: https://kubernetes.io/docs/reference/kubectl/#:~:text=,v1%20true%20Service
  solutions:
  - kubectl get serviceaccounts
- question: Describe serviceaccount default-sa.
  source: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#:~:text=,you%20want%20to%20assign%20to
  solutions:
  - kubectl describe serviceaccount default-sa
- question: Delete serviceaccount default-sa.
  source: https://kubernetes.io/docs/reference/kubectl/#:~:text=,v1%20true%20Service
  solutions:
  - kubectl delete serviceaccount default-sa
- question: In namespace `neptune`, find the Secret associated with the ServiceAccount
    `neptune-sa-v2` and write its decoded token to a file.
  solutions:
  - SECRET_NAME=$(kubectl -n neptune get secret -o jsonpath="{.items[?(@.metadata.annotations['kubernetes\.io/service-account\.name']=='neptune-sa-v2')].metadata.name}")
    && kubectl -n neptune get secret $SECRET_NAME -o jsonpath='{.data.token}' | base64
    --decode > /path/to/token
