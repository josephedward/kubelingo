questions:
  - question: "Create a new ServiceAccount named 'app-sa'."
    solution: "kubectl create sa app-sa"
  - question: "Create a manifest for a Pod that uses the service account 'app-sa'."
    solution: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: sa-pod
      spec:
        serviceAccountName: app-sa
        containers:
        - name: main
          image: busybox
          command: ["sleep", "3600"]
  - question: "Command to generate a ServiceAccount app-sa (output YAML)."
    solution: "kubectl create serviceaccount app-sa --dry-run=client -o yaml"
  - question: "Pod manifest using serviceAccountName app-sa and not auto-mounting token."
    solution: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: sa-pod
      spec:
        serviceAccountName: app-sa
        automountServiceAccountToken: false
        containers:
          - name: app
            image: busybox
            command: ["sh","-c","sleep 3600"]
  - question: "Create a ServiceAccount named default-sa."
    solution: "kubectl create serviceaccount default-sa"
  - question: "List all ServiceAccounts."
    solution: "kubectl get serviceaccounts"
  - question: "Describe serviceaccount default-sa."
    solution: "kubectl describe serviceaccount default-sa"
  - question: "Delete serviceaccount default-sa."
    solution: "kubectl delete serviceaccount default-sa"
  - question: "In namespace `neptune`, find the Secret associated with the ServiceAccount `neptune-sa-v2` and write its decoded token to a file."
    solution: "SECRET_NAME=$(kubectl -n neptune get secret -o jsonpath=\"{.items[?(@.metadata.annotations['kubernetes\\.io/service-account\\.name']=='neptune-sa-v2')].metadata.name}\") && kubectl -n neptune get secret $SECRET_NAME -o jsonpath='{.data.token}' | base64 --decode > /path/to/token"
