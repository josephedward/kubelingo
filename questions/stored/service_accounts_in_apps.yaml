questions:
- id: cfcc0d96
  question: Create a manifest for a Pod that uses the service account 'app-sa'.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - apiVersion: v1
    kind: Pod
    metadata:
      name: sa-pod
    spec:
      containers:
      - command:
        - sleep
        - '3600'
        image: busybox
        name: main
      serviceAccountName: app-sa
  source: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
  requirements:
    kind: Pod
    metadata:
      name: sa-pod
    spec:
      containers:
      - name: main
        image: busybox
- id: 2a66d4ba
  question: Command to generate a ServiceAccount app-sa (output YAML) without creating
    the resource.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - kubectl create serviceaccount app-sa --dry-run=client -o yaml
  source: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
  requirements:
    kind: Serviceaccount
    metadata:
      name: app-sa
- id: 72e99aa5
  question: Pod manifest using serviceAccountName app-sa and not auto-mounting token.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - apiVersion: v1
    kind: Pod
    metadata:
      name: app
    spec:
      serviceAccountName: app-sa
      automountServiceAccountToken: false
      containers:
      - name: busybox
        image: busybox
        command:
        - sh
        - -c
        - sleep 3600
  source: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/
  requirements:
    kind: Pod
    metadata:
      name: app
    spec:
      containers:
      - name: busybox
        image: busybox
- id: ca268aa5
  question: Create a ServiceAccount named default-sa.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - kubectl create serviceaccount default-sa
  source: https://kubernetes.io/docs/reference/kubectl/#:~:text=,v1%20true%20Service
  requirements:
    kind: Serviceaccount
    metadata:
      name: default-sa
- id: c5492365
  question: List all ServiceAccounts.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - kubectl get serviceaccounts
  source: https://kubernetes.io/docs/reference/kubectl/#:~:text=,v1%20true%20Service
- id: 9712f6ef
  question: Describe serviceaccount default-sa.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - kubectl describe serviceaccount default-sa
  source: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#:~:text=,you%20want%20to%20assign%20to
- id: 38cb4d57
  question: Delete serviceaccount default-sa.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - kubectl delete serviceaccount default-sa
  source: https://kubernetes.io/docs/reference/kubectl/#:~:text=,v1%20true%20Service
- id: '03244627'
  question: In namespace `neptune`, find the Secret associated with the ServiceAccount
    `neptune-sa-v2` and write its decoded token to a file.
  success_criteria:
  - YAML syntax is valid
  - Required Kubernetes resources are defined
  - Resource specifications are complete
  suggestions:
  - SECRET_NAME=$(kubectl -n neptune get secret -o jsonpath="{.items[?(@.metadata.annotations['kubernetes\.io/service-account\.name']=='neptune-sa-v2')].metadata.name}")
    && kubectl -n neptune get secret $SECRET_NAME -o jsonpath='{.data.token}' | base64
    --decode > /path/to/token
  source: https://wiki.aaronhatcher.com/kubernetes/CKAD/Labs/killer/5-sa-secrets
