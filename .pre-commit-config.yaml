repos:
  - repo: local
    hooks:
      - id: python-compile
        name: Python Syntax Check
        entry: python -m compileall .
        language: system
        types: [python]
      - id: run-cli-help
        name: Ensure Kubelingo CLI runs without error
        entry: |
          bash -c "python -m kubelingo.cli --help"
        language: system
        types: [python]
      - id: prevent-yaml-data-deletion
        name: Prevent deletion of yaml quiz data files
        entry: |-
          bash -c "if git diff --cached --diff-filter=D --name-only | grep -E '^(question-data/|question-data-backup/).*\\.ya?ml$'; then echo 'Error: Deletion of YAML quiz data is prohibited.'; exit 1; fi"
        language: system
        stages: [pre-commit]
      - id: forbid-generated-yaml
        name: Forbid committing generated YAML quiz data
        entry: bash -c 'echo "Error: Attempting to commit generated YAML quiz data. These files should not be in version control." && exit 1'
        language: system
        files: ^question-data/yaml/.*\.(yaml|yml)$
        stages: [commit]
      - id: prevent-question-data-deletion
        name: Prevent deletion of quiz data YAML files
        entry: |
          bash -c "if git diff --cached --diff-filter=D --name-only | grep -E '^(question-data/|question-data-backup/).*\\.ya?ml$'; then echo 'Error: Deletion of quiz data is prohibited.'; exit 1; fi"
        language: system
        stages: [pre-commit]
